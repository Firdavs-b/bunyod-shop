{% extends 'store/base.html' %}
{% load static %} 
{% block content %}
<div class="container py-4">
  <div class="card shadow-lg border-0 p-4" style="border-radius: 20px;">
    <h3 class="text-center mb-4 text-success fw-bold">
      üí≥ –¢–∞—Å–¥–∏“õ–∏ –∑–∞–∫–∞–∑
    </h3>

    {% if cart_items %}
    <div class="table-responsive mb-4">
      <table class="table align-middle">
        <thead class="table-success text-center">
          <tr>
            <th>–ú–∞“≥—Å—É–ª–æ—Ç</th>
            <th>–ù–∞—Ä—Ö</th>
            <th>–ú–∏“õ–¥–æ—Ä</th>
            <th>“≤–∞–º–∞–≥”£</th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart_items %}
          <tr>
            <td>
              <div class="d-flex align-items-center">
                <img src="{{ item.product.image }}" alt="{{ item.product.name }}"
                     class="rounded me-2" width="60" height="60">
                <span class="fw-semibold">{{ item.product.name }}</span>
              </div>
            </td>
            <td class="text-center text-muted">{{ item.product.sell_price }} —Å–æ–º–æ–Ω”£</td>
            <td class="text-center">{{ item.quantity }}</td>
            <td class="text-center fw-bold text-success">{{ item.total_price }} —Å–æ–º–æ–Ω”£</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="text-end mb-4">
      <h4 class="fw-bold">“≤–∞–º–∞–≥”£: <span class="text-success">{{ total }} —Å–æ–º–æ–Ω”£</span></h4>
    </div>

    <form method="post" class="mt-3">
      {% csrf_token %}
      <div class="row g-3">
        <h5 class="fw-semibold text-primary mb-2">üßç –ú–∞—ä–ª—É–º–æ—Ç–∏ –º—É—à—Ç–∞—Ä”£</h5>
        <div class="col-md-6">
          <input type="text" name="first_name" class="form-control form-control-lg" placeholder="–ù–æ–º" required>
        </div>
        <div class="col-md-6">
          <input type="text" name="last_name" class="form-control form-control-lg" placeholder="–ù–∞—Å–∞–±" required>
        </div>
        <div class="col-md-6">
          <input type="tel" name="phone" class="form-control form-control-lg" placeholder="+992 ..." required>
        </div>
        <div class="col-md-6">
          <input type="text" name="address" class="form-control form-control-lg" placeholder="–°—É—Ä–æ“ì–∞" required>
        </div>
        <div class="col-md-12">
          <select name="payment_method" class="form-select form-select-lg" required>
            <option value="">–£—Å—É–ª–∏ –ø–∞—Ä–¥–æ—Ö—Ç—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥</option>
            <option value="cash">üíµ –ù–∞“õ–¥</option>
            <option value="card">üí≥ –ö–æ—Ä—Ç–∏ –±–æ–Ω–∫”£</option>
            <option value="transfer">üì± –ü—É–ª–≥—É–∑–∞—Ä–æ–Ω”£ (QR/–∞–ø–ø–∞)</option>
          </select>
        </div>
      </div>

      <div class="mt-4 text-center">
        <button type="submit" class="btn btn-success btn-lg w-100 py-3 fw-semibold" style="border-radius: 15px;">
          ‚úÖ –§–∏—Ä–∏—Å—Ç–æ–¥–∞–Ω–∏ –∑–∞–∫–∞–∑
        </button>
      </div>
    </form>

    {% else %}
    <div class="alert alert-warning text-center mt-3" style="border-radius: 15px;">
      üõí –°–∞–≤–∞—Ç —Ö–æ–ª”£ –∞—Å—Ç. –õ—É—Ç—Ñ–∞–Ω –∞–≤–≤–∞–ª –º–∞“≥—Å—É–ª–æ—Ç—Ä–æ –∏–ª–æ–≤–∞ –∫—É–Ω–µ–¥.
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}